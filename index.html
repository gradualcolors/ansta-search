<html>

<head>
	<title>Ensemble Stars Renders Search Tool</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
	<script type="text/javascript">

	var json = {};
	
	$.getJSON('https://gsx2json.com/api?id=1jxE1OK_Uf_BMXcQYrzSIMmt5gAKqEiIbN6cfGHJTeOk&columns=false', function(data) {  	
	 json = data;
	       $(function() {
        // ...trigger the custom `jsonReady` event
        $(document).trigger('jsonReady');
      });
    });
	
$(document).on('jsonReady', whatever);
		
		
$('#ansta-search').on('keyup keypress', function(e) {
  var keyCode = e.keyCode || e.which;
  if (keyCode === 13) { 
    e.preventDefault();
    return false;
  }
});



		  $('#txt-search').keyup(function(){
		            var searchField = $(this).val();
					if(searchField === '')  {
						$('#filter-records').html('');
						return;
					}
					
		            var regex = new RegExp(searchField, "i");					
					
		            var output = '<div class="row">';
		            var count = 1;
					  $.each(data.rows, function(key, val){
						if ((val.charactername.search(regex) != -1) || (val.cardgachaeventname.search(regex) != -1)) {
						  output += '<div class="col-md-6 well">';
						  
						  if (val.indrive != 'No'){
						  output += '<div class="col-md-3"><img class="img-responsive" src="https://drive.google.com/thumbnail?id='+val.imageid+'&sz=w200-h113" alt="'+ val.cardnumberfile +'" /></div>';
						  }
						  else{
						  output += '<div class="col-md-3">Image Unavailable</div>'
						  }
						  output += '<div class="col-md-7">';
						  output += '<h5>' + val.charactername + '</h5>';
						  output += '<p>Event/Gacha:' + val.cardgachaeventname + '</p>'
						  output += '<p>Download URL:' + val.url + '</p>'
						  output += '</div>';
						  output += '</div>';
						  if(count%2 == 0){
							output += '</div><div class="row">'
						  }
						  count++;
						}
					  });
					  output += '</div>';
					  $('#filter-records').html(output);
		        });
				});
			
			
	</script>
</head>

<body>
	<div class="container" style="padding:50px 250px;">
		<form id="ansta-search" role="form">
			<div class="form-group">
				<input type="input" class="form-control input-lg" id="txt-search" placeholder="Type your search character">
			</div>
		</form>
		<div id="filter-records"></div>
	</div>
</body>

</html>
